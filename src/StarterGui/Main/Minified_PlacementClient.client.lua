local a=tick() local p=game:GetService("ReplicatedStorage") local j=game:GetService("RunService") local f=game:GetService("TweenService") local i=game:GetService("UserInputService") local b=p.Modules local _=p.Events local l=require(b.ExtraStrings) local s=require(script.Parent.SettingsFrame.SettingsList.Color.CMenu.ColorSelector.ColorScript.Color) local m=require(b.FasterWait) local n=require(b.Grid) local Q=require(game.ReplicatedStorage.Modules.BlockHandles) local r=_.Mode local b=_.Clicked local d=_.GetPlacedBlocks local y=script.ModeChanged local A=game.Players.LocalPlayer local h=A.Character or A.CharacterAdded:Wait() local R=A:GetMouse() local _=script.Parent local S=_.Modes local q=_.Settings local K=_.SettingsFrame local P=K.SettingsList local G=P.DragPlace.DPButton local _=P.AdvancedMode.AMButton local e=P.Color.CButton local M=P.Color.CMenu.CInput local g=P.Material.MButton local O=Enum.EasingStyle local N=Enum.EasingDirection local _="rbxassetid://3944676352" local _="rbxassetid://3944680095" local W=TweenInfo.new local w=Enum.Material:GetEnumItems() local _={"Plastic","Wood","Slate","Concrete","Grass","Marble","Granite","Brick","Pebble","Sand","Fabric","SmoothPlastic","Metal","WoodPlanks","Cobblestone"} local _={"CorrodedMetal","DiamondPlate","Foil","Ice","ForceField","Neon","Glass"} local c={"Air","Water","Rock","Glacier","Snow","Sandstone","Mud","Basalt","Ground","CrackedLava","Asphalt","LeafyGrass","Salt","Limestone","Pavement"} local D=Enum.Material.Plastic local F=true local I=false local E=false local B local T local C local z local u local o local t local v=false local k local _ local x local V={mMenu=P.Material.MMenu,cMenu=P.Color.CMenu} local U={} local X={} local L={} local H={} local J={} function X:autoTween(b,a,_,c)local _=f:Create(b,a,_) _:Play() if c then _.Completed:Connect(c)end end function X.darken(a,_)return Color3.new(_*a.R,_*a.G,_*a.B)end function X.lighten(_,a)return Color3.new(a+(1-a)*_.R,a+(1-a)*_.G,a+(1-a)*_.B)end function X.darkenOnHover(a)local _=a.BackgroundColor3 a.MouseEnter:Connect(function()X:autoTween(a,W(0.15),{BackgroundColor3=X.darken(a.BackgroundColor3,0.7)})end) a.MouseLeave:Connect(function()X:autoTween(a,W(0.15),{BackgroundColor3=_})end)end function X.darkenOnClick(a)local _=a.BackgroundColor3 a.MouseButton1Down:Connect(function()X:autoTween(a,W(0.15),{BackgroundColor3=X.darken(a.BackgroundColor3,0.7)})end) a.MouseButton1Up:Connect(function()X:autoTween(a,W(0.15),{BackgroundColor3=_})end)end function X.wiggleOnClick(_)_.MouseButton1Click:Connect(function()X:autoTween(_,W(0.1),{Rotation=15},function()X:autoTween(_,W(0.1),{Rotation=-15},function()X:autoTween(_,W(0.1),{Rotation=0})end)end)end) if _.Parent:IsA("GuiButton")then _.MouseButton1Click:Connect(function()X:autoTween(_.Parent,W(0.1),{Rotation=15},function()X:autoTween(_.Parent,W(0.1),{Rotation=-15},function()X:autoTween(_.Parent,W(0.1),{Rotation=0})end)end)end)end end function X.circleRotate(_)X:autoTween(_,W(0.2),{Rotation=_.Rotation+360},function()if _.Rotation%360~=0 then repeat _.Rotation=_.Rotation/360 m()until _.Rotation%360==0 end end)end function X.biggerOnHover(d,b)local c=d.Size local a="^.+%," local _=l:remove(string.match(tostring(c.X),a),",") local a=l:remove(string.match(tostring(c.Y),a),",") local _=UDim2.fromScale(_*b,a*b) d.MouseEnter:Connect(function()d:TweenSize(_,N.InOut,O.Linear,0.15,true)end) d.MouseLeave:Connect(function()d:TweenSize(c,N.InOut,O.Linear,0.15,true)end)end for _,_ in ipairs(K:GetDescendants())do if _:IsA("TextButton")then _.AutoButtonColor=false X.biggerOnHover(_,1.08)elseif _:IsA("ImageButton")then _.AutoButtonColor=false if _.Name=="Reset"then _.MouseButton1Click:Connect(function()X.circleRotate(_)end)else X.darkenOnClick(_)end X.darkenOnHover(_)end end U.preview={} U.advancedMode={} function U.placeBlock()b:FireServer(n.position,R.Target,s.hsv,D)end function U.preview:create()T=Instance.new("Part",workspace) T.Name=A.Name.."|".."Preview" T.Anchored=true T.Position=Vector3.new(0,10,0) T.Size=Vector3.new(2,2,2) T.Material=D T.BrickColor=BrickColor.Green() T.Transparency=0.5 T.CanCollide=false R.TargetFilter=T end function U.preview:update()X:autoTween(T,W(0.1),{Position=n:getPosition(R.Hit.p,R.Target,R.TargetSurface,T,h)})end function U.preview:reset()if F==true then T.Transparency=0.5 if C then C:Disconnect()end if z then z:Disconnect()end B=j.Heartbeat:Connect(function()U.preview:update()end)elseif I==true then T.Transparency=1 if B then B:Disconnect()end C=R.Move:Connect(function()local c=R.Target if c and c~=workspace.Baseplate and c.Parent==workspace then local b=c.Color local a=c.Transparency c.BrickColor=BrickColor.Red() c.Transparency=0.5 z=R.Move:Connect(function()local _=R.Target if _~=c then c.Color=b c.Transparency=a end end)end end)elseif E==true then T.Transparency=1 if B then B:Disconnect()end if C then C:Disconnect()end if z then z:Disconnect()end end end function U.advancedMode:activate()local b=d:InvokeServer() if E==true then local a=false for _,c in ipairs(b)do Q.selectionBox:new(c) u,o=Q.selectionBox:onHover(c,function()Q.selectionBox:activate(c)end,function()Q.selectionBox:deactivate(c)end) t=Q.selectionBox:onClick(c,function()Q.sizeHandle:new(c) if a==false then a=true for _,_ in ipairs(b)do if _~=c then Q.sizeHandle:destroy(_)end end else a=false Q.sizeHandle:destroy(c)end end)end else if u then u:Disconnect()end if o then o:Disconnect()end if t then t:Disconnect()end for _,_ in ipairs(b)do Q.selectionBox:destroy(_) Q.sizeHandle:destroy(_)end end end function U.switchModes()local d=90 local c=45 local a=0 local b=UDim2.new(0.05,0,0.1,0) local _=UDim2.new(0.04,0,0.8,0) if S.Rotation==d then S.Image="rbxassetid://3944675151" S.Size=b X:autoTween(S,W(0.1),{Rotation=c}) F=false I=true E=false y:Fire() r:FireServer(F,I)elseif S.Rotation==c then S.Image="rbxassetid://4370186570" S.Size=_ X:autoTween(S,W(0.1),{Rotation=a}) F=false I=false E=true y:Fire() r:FireServer()elseif S.Rotation==a then S.Image="rbxassetid://3944675151" S.Size=b X:autoTween(S,W(0.1),{Rotation=d}) F=true I=false E=false y:Fire() r:FireServer(F,I)end end function U.dragPlace()local a=Enum.UserInputType.MouseButton1 if v==false then v=true X:autoTween(G,W(0.1),{ImageTransparency=1},function()X:autoTween(G.Check,W(0.1),{ImageTransparency=0})end) if E==false then k=i.InputBegan:Connect(function(_)local _=_.UserInputType if _==a then x=j.Heartbeat:Connect(function()U.placeBlock()end)end end) _=i.InputEnded:Connect(function(_)local _=_.UserInputType if _==a then if x then x:Disconnect()end end end)end else v=false X:autoTween(G.Check,W(0.1),{ImageTransparency=1},function()X:autoTween(G,W(0.1),{ImageTransparency=0})end) k:Disconnect() _:Disconnect() x:Disconnect()end end U.preview:create() U.preview:reset() function L.change()local _=P.Color.CMenu function L:hexToRgb(a)local c,d,b pcall(function()local _="^%#*%w+" local _=string.match(a,_) if _ then _=_:gsub("#","") _=_:gsub("0x","") if#_==6 then c=tonumber("0x".._:sub(1,2)) d=tonumber("0x".._:sub(3,4)) b=tonumber("0x".._:sub(5,6))end end end) return c,d,b end function L.getInput()local _="^(%d+)[%,%s]*(%d+)[%,%s]*(%d+)" local b,_,a=string.match(M.Text,_) if M.Text~=""then if b and _ and a then M.TextStrokeColor3=Color3.fromRGB(b,_,a) s.hsv=Color3.fromHSV(Color3.toHSV(Color3.fromRGB(b,_,a)))else M.TextStrokeColor3=Color3.fromRGB(L:hexToRgb(M.Text)) s.hsv=Color3.fromHSV(Color3.toHSV(Color3.fromRGB(L:hexToRgb(M.Text))))end end end L.getInput()end function H:switch(_)_.MouseButton1Click:Connect(function()D=Enum.Material[_.Parent.Name]end)end function H:reset(_,a)_.MouseButton1Click:Connect(function()D=Enum.Material.Plastic a.UIPageLayout:JumpTo(a.Plastic)end)end function H:shuffle(_,a)_.MouseButton1Click:Connect(function()local _=math.random(1,#a:GetChildren()) a.UIPageLayout:JumpToIndex(_) D=Enum.Material[a.UIPageLayout.CurrentPage.Name]end)end local function _()local d=1 local a="%a+$" local function b(c,_)local b=Instance.new("Part",c) local a=Instance.new("Camera",c) b.Material=w[_] b.Color=Color3.new(0.866667,0.709804,0.6) c.CurrentCamera=a c.BackgroundTransparency=1 a.CFrame=CFrame.new(Vector3.new(0,2,4),b.Position)end repeat local c=p.MFrame:Clone() local _=c.Preview local a=string.match(tostring(w[d]),a) c.Parent=V.mMenu c.Name=a c.Material.Text=a b(_,d) H:switch(c.Check) H:reset(c.Reset,V.mMenu) H:shuffle(c.Shuffle,V.mMenu) m() d=d+1 until d==#w+1 for _,_ in ipairs(V.mMenu:GetChildren())do if table.find(c,_.Name)then _:Destroy()end end end _() function V.closeAllMenus(a)for _,_ in pairs(V)do if _~=a and typeof(_)~="function"and _:GetAttribute("open")==true then local _=string.lower(_.Name:sub(1,1)).."Menu" J[_]()end end end function J.settings()local _=UDim2.new(0.21,0,0.65,0) local a=UDim2.new(0.01,0,0.54,0) local c=UDim2.new(0.21,0,0,0) local b=UDim2.new(0.01,0,0.87,0) if K.Size==c then K.Visible=true X:autoTween(q,W(0.1),{Rotation=90}) K:TweenSizeAndPosition(_,a,N.Out,O.Sine,0.2)else X:autoTween(q,W(0.1),{Rotation=0}) K:TweenSizeAndPosition(c,b,N.In,O.Sine,0.2,true,function()K.Visible=false end)end end function J.cMenu()local _=UDim2.new(2.188,0,1.96,0) local a=UDim2.new(1.01,0,1.96,0) if V.cMenu.Position==a then V.cMenu:SetAttribute("open",true) V.cMenu:TweenPosition(_,N.Out,O.Quad,0.3) V.closeAllMenus(V.cMenu)else V.cMenu:SetAttribute("open",false) V.cMenu:TweenPosition(a,N.In,O.Quad,0.3)end end function J.mMenu()local _=UDim2.new(2.05,0,-1,0) local a=UDim2.new(1.01,0,-1,0) if V.mMenu.Position==a then V.mMenu:TweenPosition(_,N.Out,O.Quad,0.3) V.mMenu:SetAttribute("open",true) V.closeAllMenus(V.mMenu)else V.mMenu:SetAttribute("open",false) V.mMenu:TweenPosition(a,N.In,O.Quad,0.3)end end R.Button1Down:Connect(U.placeBlock) S.MouseButton1Click:Connect(U.switchModes) q.MouseButton1Click:Connect(J.settings) G.MouseButton1Click:Connect(U.dragPlace) G.Check.MouseButton1Click:Connect(U.dragPlace) e.MouseButton1Click:Connect(J.cMenu) g.MouseButton1Click:Connect(J.mMenu) M.Changed:Connect(L.change) y.Event:Connect(function()U.preview:reset() U.advancedMode:activate()end) A.CharacterAdded:Connect(function(_)h=_ end) print(tick()-a)